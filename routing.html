<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <meta http-equiv="x-ua-compatible" content="IE=edge">

        <title>Koselig - Wordpress backend for a Laravel frontend</title>
        <meta name="description"
              content="Koselig is a Laravel library providing a fluent Wordpress integration whilst following Laravel's beautiful syntax.">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/themes/prism.min.css">
        <link rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
        <link rel="stylesheet" href="https://koselig.github.io/documentation/public/css/app.css">
    </head>

    <body class="">
        <nav class="navbar navbar-expand-lg fixed-top">
            <div class="container">
                <button class="navbar-toggler" type="button" data-toggle="collapse"
                        data-target="#bd-main-nav" aria-controls="bd-main-nav" aria-expanded="false"
                        aria-label="Toggle navigation">
                    â˜°
                </button>

                <a class="navbar-brand" href="https://koselig.github.io/documentation">
                    Koselig
                </a>

                <div class="collapse navbar-collapse" id="bd-main-nav">
                    <ul class="navbar-nav ml-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="https://koselig.github.io/documentation/what-am-i.html">What is Koselig?</a>
                            <a class="nav-link" href="https://koselig.github.io/documentation/getting-started.html">Getting started</a>
                        </li>

                        <li class="nav-item">
                            <a class="github nav-link" href="https://github.com/koselig/koselig">
                                <i class="ion-social-github"></i>
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>

        <main class="">
                <div class="container documentation">
        <div class="sidebar">
            <ul>
                                    <li>
                        <span class="section-title">Introduction</span>

                        <ul>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/what-am-i.html">
                                        What is Koselig?
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/getting-started.html">
                                        Getting started
                                    </a>
                                </li>
                                                    </ul>
                    </li>
                                    <li>
                        <span class="section-title">Components</span>

                        <ul>
                                                            <li class="active">
                                    <a href="https://koselig.github.io/documentation/routing.html">
                                        Routing
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/auth-guard.html">
                                        Authentication guard
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/filters.html">
                                        Filters
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/meta.html">
                                        Meta
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/hashing.html">
                                        Hashing
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/helpers.html">
                                        Helpers
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/interoperability.html">
                                        WP Interoperability
                                    </a>
                                </li>
                                                            <li class="">
                                    <a href="https://koselig.github.io/documentation/views.html">
                                        View Helpers
                                    </a>
                                </li>
                                                    </ul>
                    </li>
                            </ul>
        </div>

        <article>
            <div class="pull-xs-right hidden-sm-down edit-gh">
                <a href="https://github.com/koselig/documentation/blob/master/routing.md" class="btn btn-secondary btn-sm">
                    Edit this page on GitHub
                </a>
            </div>

            <h1 id="routing">Routing</h1>
<p>Beautiful routing is one of the core points of Koselig. Koselig tries to stick to Laravel's routing patterns to give the most native feel as possible. Like Laravel, routes accept either a closure or a controller action.</p>
<h3 id="template-routing">Template Routing</h3>
<p>Template routing is one of the main types of routing you'll most likely be using. </p>
<div class="alert alert-info" role="alert"><strong>Heads up!</strong> You can declare your own templates in <code>config/template.php</code>, the slug (key) set in this file will be the one used in the routing method.</div>
<p>This method accepts a template slug name and an action.</p>
<pre><code class="language-php">Route::template('home', function () {
    return 'Hello from the home template!';
});</code></pre>
<p>When a user visits a page with the template with the slug <code>home</code> they will see a string on their screen saying &quot;Hello from the home template!&quot;</p>
<h3 id="singular-routing">Singular Routing</h3>
<p>This route is used when a singular post is being displayed. You may pass an array of post types or a single post type as a string to this method. You can optionally have the current post's model injected into the parameters. Any subclass of <code>Post</code> also works.</p>
<div class="alert alert-info" role="alert"><strong>Heads up!</strong> You can declare your own templates in <code>config/posttypes.php</code>, the slug (key) set in this file will be the one used in the routing method.</div>
<pre><code class="language-php">Route::singular('post', function (Post $post) {
    dd($post);
});</code></pre>
<h3 id="archive-routing">Archive Routing</h3>
<p>This route is used when an archive page is being displayed. You may pass an array of post types, a single post type, or no post type at all to this method. If you pass no post type, that route will become the default archive page if no route is declared for that particular archive page.</p>
<pre><code class="language-php">Route::archive('suppliers', function () {
    return 'Welcome to the Suppliers archive!';
});

Route::archive(function () {
    return 'Welcome to the default archive page!';
});</code></pre>
<h3 id="page-routing">Page Routing</h3>
<p>Page routing is slightly different to the previous routing methods in that instead of taking a slug, it takes a page ID. This is down to the fact that the slug of pages are editable in the Wordpress administration panel, this that means that if a user (aka rogue SEO team) decides to change a slug you'll still be serving the page with the correct action.</p>
<div class="alert alert-info" role="alert"><strong>Heads up!</strong> Despite the name, page routing can be used to serve any post type, this includes normal posts.</div>
<pre><code class="language-php">Route::page(3, function () {
    echo 'Hello from my page with id 3!';
});</code></pre>
<h3 id="other-routing-methods">Other Routing Methods</h3>
<p>Routing methods other than <code>GET</code> are available for Wordpress routing. To use this, you should pass <code>method</code> as an option. You can pass in as many methods as you'd like using this, for example:</p>
<pre><code class="language-php">Route::template('home', [
    'method' =&gt; ['GET', 'POST', 'OPTIONS'],
    'uses' =&gt; function () {
        return 'Hello from the home template!';
    }
]);</code></pre>
<h3 id="native-routing">Native Routing</h3>
<p>Although discouraged in normal use, Laravel's native routing methods are still available for use without having to have a page for the route in Wordpress. This shouldn't normally be used but is very helpful when dealing with something such as an AJAX call or form submission where creating a page in Wordpress for this would be painful and useless.</p>
<h2 id="adding-pages-to-wordpress-admin">Adding pages to Wordpress Admin</h2>
<p>Adding pages to the Wordpress dashboard using Koselig is incredibly easy. You can use <code>Page::addPage($pageTitle, $menuTitle, $capability, $slug, $action, $iconUrl = '', $position = null)</code> and <code>Page::addSubpage($parent, $pageTitle, $menuTitle, $capabilities, $slug, $action)</code> to do this, these methods match the syntax of <a href="https://developer.wordpress.org/reference/functions/add_menu_page/">add_menu_page</a> and <a href="https://developer.wordpress.org/reference/functions/add_submenu_page/">add_submenu_page</a>, respectively. The main difference between using <code>Page</code> and using Wordpress' native methods is that <code>Page</code> wraps your <code>action</code> so you can pass it the same types you can pass to your routes (closures and <code>controller@method</code> syntax) and dependencies will automatically be injected.</p>
        </article>
    </div>
        </main>

        <script src="https://koselig.github.io/documentation/public/js/app.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/prism.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-bash.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.5.1/components/prism-php.min.js"></script>

        <script>
            $(function () {
                // Add anchors to headers
                $('article h2, article h3, article h4, article h5').each(function () {
                    var url = document.URL.replace(/#.*$/, "") + '#' + $(this).attr('id');
                    $(this).append(' <a class="anchor" href="' + url + '">#</a>');
                });
            });
        </script>
    </body>
</html>
